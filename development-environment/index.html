
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://phacdatahub.github.io/ruok-service-autochecker/development-environment/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-8.3.9">
    
    
      
        <title>Development Environment - Observatory (R U OK?) Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#4051b5">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#development-environment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Observatory (R U OK?) Documentation" class="md-header__button md-logo" aria-label="Observatory (R U OK?) Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Observatory (R U OK?) Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Development Environment
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/PHACDataHub/ruok-service-autochecker" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Observatory (R U OK?) Documentation" class="md-nav__button md-logo" aria-label="Observatory (R U OK?) Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Observatory (R U OK?) Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/PHACDataHub/ruok-service-autochecker" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../data-contracts/" class="md-nav__link">
        Data Contracts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../deployment/" class="md-nav__link">
        Deployment
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Development Environment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Development Environment
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vscode-development-containers" class="md-nav__link">
    VSCode Development Containers
  </a>
  
    <nav class="md-nav" aria-label="VSCode Development Containers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-dev-container-as-non-root-user" class="md-nav__link">
    Starting Dev Container as non-root user
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attach-development-container-to-host-network" class="md-nav__link">
    Attach Development Container to Host Network
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vscode-development-tools" class="md-nav__link">
    VSCode Development Tools
  </a>
  
    <nav class="md-nav" aria-label="VSCode Development Tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vscode-integrated-debugger" class="md-nav__link">
    VSCode Integrated Debugger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variable-management-with-direnv" class="md-nav__link">
    Environment Variable Management with direnv
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#podman" class="md-nav__link">
    Podman
  </a>
  
    <nav class="md-nav" aria-label="Podman">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-podman-with-kind" class="md-nav__link">
    Using Podman with KinD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-an-image-into-the-kind-cluster" class="md-nav__link">
    Loading an image into the KinD Cluster
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useful-code-snippets" class="md-nav__link">
    Useful Code Snippets
  </a>
  
    <nav class="md-nav" aria-label="Useful Code Snippets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nats-cli" class="md-nav__link">
    NATS CLI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#related-issues" class="md-nav__link">
    Related Issues
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quickstart-for-development/" class="md-nav__link">
        Quickstart for Development
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../github-webhooks/" class="md-nav__link">
        GitHub Webhooks
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          GraphQL API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="GraphQL API" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          GraphQL API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graphql/graphql-api/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graphql/query/" class="md-nav__link">
        Queries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graphql/mutation/" class="md-nav__link">
        Mutations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graphql/type-definitions.md" class="md-nav__link">
        Type Definitions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../scanners/" class="md-nav__link">
        Scanners
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../register-repository/" class="md-nav__link">
        Register a Repository
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vscode-development-containers" class="md-nav__link">
    VSCode Development Containers
  </a>
  
    <nav class="md-nav" aria-label="VSCode Development Containers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-dev-container-as-non-root-user" class="md-nav__link">
    Starting Dev Container as non-root user
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attach-development-container-to-host-network" class="md-nav__link">
    Attach Development Container to Host Network
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vscode-development-tools" class="md-nav__link">
    VSCode Development Tools
  </a>
  
    <nav class="md-nav" aria-label="VSCode Development Tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vscode-integrated-debugger" class="md-nav__link">
    VSCode Integrated Debugger
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variable-management-with-direnv" class="md-nav__link">
    Environment Variable Management with direnv
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#podman" class="md-nav__link">
    Podman
  </a>
  
    <nav class="md-nav" aria-label="Podman">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-podman-with-kind" class="md-nav__link">
    Using Podman with KinD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loading-an-image-into-the-kind-cluster" class="md-nav__link">
    Loading an image into the KinD Cluster
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useful-code-snippets" class="md-nav__link">
    Useful Code Snippets
  </a>
  
    <nav class="md-nav" aria-label="Useful Code Snippets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nats-cli" class="md-nav__link">
    NATS CLI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#related-issues" class="md-nav__link">
    Related Issues
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/PHACDataHub/ruok-service-autochecker/edit/master/docs/development-environment.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="development-environment">Development Environment</h1>
<p>This page outlines how to set up a development environment for this project. This document is meant to serve as a high-level mental model for how to set up a development environment. There are many ways to substitute certain components if a developer prefers one tool over another.</p>
<h2 id="overview">Overview</h2>
<p>The diagram below shows a high-level overview of the development environment.</p>
<p><img alt="Development Environment" src="../diagrams/dev-environment.svg" /></p>
<p><a href="https://code.visualstudio.com/">VSCode</a> is used as the integrated development environment. VSCode is run in client-server mode: The desktop VSCode application is downloaded for the operating system of choice, and a project-specific <a href="https://code.visualstudio.com/docs/devcontainers/containers">VSCode Dev Container</a> is used to run VSCode server as a dev container. The VSCode Dev Container is attached to the host network, so the development container can access ports exposed on <code>127.0.0.1</code>, for example.</p>
<p><a href="https://k9scli.io/">K9s</a> is used as a kubernetes dashboard, which provides a user interface for the developer to interact with the Kubernetes cluster.</p>
<p><a href="https://podman.io/">Podman</a> is a daemonless and rootless OCI-compliant runtime and container manager that can be used to build OCI images and run containers on your development machine.</p>
<p><a href="https://kind.sigs.k8s.io/">Kubernetes in Docker</a> (KinD) is a tool for running local kubernetes clusters entirely in OCI containers (i.e. OCI containers are used to run Kubernetes nodes). </p>
<p>The sections below outline how to set up each component of this environment.</p>
<h2 id="vscode-development-containers">VSCode Development Containers</h2>
<p><strong>TLDR</strong>: The <code>.devcontainer/devcontainer.json</code> file contains the dev container configuration for this project. If you install the <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers">VSCode Dev Container extension</a> and build/run the dev container, the dev container will be setup automatically. The section below highlights specific issues that you might encounter along with helpful resources to troubleshoot potential issues.</p>
<h3 id="starting-dev-container-as-non-root-user">Starting Dev Container as non-root user</h3>
<p>I added the <code>"containerUser": "node"</code> key to start the dev container as the default non-root <code>node</code> user for the dev container. Since I am running my dev container on Ubuntu Linux, I also needed to add the following line to my <code>devcontainer.json</code> file:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="err">...</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;runArgs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;--userns=keep-id&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="err">...</span>
</code></pre></div></td></tr></table></div>
<p>This line of configuration is necessary because, on Linux, podman maps the user ID (UID) that launched the container process to the root user of the container. By default, this means that my current user ID (usually <code>1000</code> in most cases) maps to the UID <code>1</code> (i.e. root user of the container user namespace). You can run <code>podman unshare cat /proc/self/uid_map</code> on the host machine to see how host UIDs map to UIDs in the container process namespaces.</p>
<p>This caused problems as the files/folders in the repo are mounted to the container filesystem with <code>root</code> as the owner, so the <code>node</code> user didn't have permission to write to these files. Setting <code>--userns=keep-id</code> keeps the UID of <code>1000</code> in the container, so the repo files/folders that get mounted to the container filesystem are correctly owned by UID <code>1000</code> (i.e. <code>node</code> user), and it is possible to write to files in the container as the non-root user.</p>
<p>See <a href="https://stackoverflow.com/a/70774211">this stackoverflow answer</a> for a more detailed explanation of how this works.</p>
<h3 id="attach-development-container-to-host-network">Attach Development Container to Host Network</h3>
<p>As per <a href="https://community.home-assistant.io/t/developing-in-devcontainer-how-to-access-local-network-of-host/271935/2">this thread answer</a>, add the following key in <code>devcontainer.json</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="err">...</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;runArgs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;--network=host&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="err">...</span>
</code></pre></div></td></tr></table></div>
<h2 id="vscode-development-tools">VSCode Development Tools</h2>
<h3 id="vscode-integrated-debugger">VSCode Integrated Debugger</h3>
<p>Debug configurations can be found in the <code>.vscode/launch.json</code> file in the project root. For information on how to use VSCode's integrated debugger, see the <a href="https://code.visualstudio.com/docs/editor/debugging">VSCode Debugging documentation</a>.</p>
<h3 id="environment-variable-management-with-direnv">Environment Variable Management with <code>direnv</code></h3>
<p>In order to run or debug a given application in a dev container, it may be necessary load a specific set of environment variables to configure that application. <a href="https://direnv.net/"><code>direnv</code></a> is a tool that automatically loads environment variables into your shell when you <code>cd</code> into a folder.</p>
<p>You may need to run <code>direnv allow</code> in a directory upon making changes to its <code>.envrc</code> file.</p>
<h2 id="podman">Podman</h2>
<p>Instructions for installing the Podman runtime on all platforms can be found <a href="https://podman.io/docs/installation">at this link</a>. Additionally (and optionally), you can install <a href="https://podman-desktop.io/">Podman Desktop</a>, which provides a graphical tool to facilitate working with podman.</p>
<h3 id="using-podman-with-kind">Using Podman with KinD</h3>
<p>It might be necessary to follow the steps in <a href="https://kind.sigs.k8s.io/docs/user/rootless/#creating-a-kind-cluster-with-rootless-podman">Kind - Rootless</a>. After following these instructions, I had to run <code>systemd-run --user --scope --property=Delegate=yes kind create cluster</code> to create my kind cluster. This <a href="https://www.linkedin.com/pulse/deploying-kubernetes-in-docker-kind-cluster-using-podman-tom-dean-1c">Linkedin Arcticle</a> is also a good resource that reviews step-by-step setup of a KIND cluster using podman on Ubuntu Linux.</p>
<h3 id="loading-an-image-into-the-kind-cluster">Loading an image into the KinD Cluster</h3>
<p>KinD doesn't spin up a local registry out of the box, so it's necessary to run <code>kind load docker-image &lt;your image:tag&gt;</code> to load a locally build container image into the KinD cluster.</p>
<p>If you're using Podman Desktop, there is a UI convenience for this by navigating to the <strong>Images</strong> tab, then for the image(s) you want to load into the KinD cluster, click <strong>"Push image to Kind cluster"</strong> (see screenshot below).</p>
<p><img alt="Push image to KinD" src="../img/podman-push-image-to-kind.png" /></p>
<h2 id="useful-code-snippets">Useful Code Snippets</h2>
<h3 id="nats-cli">NATS CLI</h3>
<p>Connect to nats on <code>localhost</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>nats<span class="w"> </span>context<span class="w"> </span>add<span class="w"> </span><span class="nb">local</span><span class="w"> </span>--description<span class="w"> </span><span class="s2">&quot;Localhost&quot;</span><span class="w"> </span>--select
</code></pre></div></td></tr></table></div>
<p>Subscribe to a queue group</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>nats<span class="w"> </span>sub<span class="w"> </span>EventsUpdate
</code></pre></div></td></tr></table></div>
<p>Publish to a queue group</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>nats<span class="w"> </span>pub<span class="w"> </span><span class="s2">&quot;ClonedRepoEvent.&gt;&quot;</span><span class="w"> </span><span class="s1">&#39;{&quot;webEndpoints&quot;: [&quot;https://www.canada.ca/en/public-health.html&quot;]}&#39;</span><span class="sb">`</span>
</code></pre></div></td></tr></table></div>
<h3 id="related-issues">Related Issues</h3>
<ul>
<li><a href="https://github.com/kubernetes-sigs/kind/issues/2872">KinD - Running with rootless podman doesn't work as documented</a></li>
<li><a href="https://github.com/kubernetes-sigs/kind/issues/2537">KinD - Podman creation fails</a></li>
<li><a href="https://iximiuz.com/en/posts/kubernetes-kind-load-docker-image/">KinD - How I Wasted a Day Loading Local Docker Images</a></li>
</ul>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../deployment/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Deployment" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Deployment
            </div>
          </div>
        </a>
      
      
        
        <a href="../quickstart-for-development/" class="md-footer__link md-footer__link--next" aria-label="Next: Quickstart for Development" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Quickstart for Development
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/PHACDataHub/ruok-service-autochecker" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>